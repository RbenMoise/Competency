{"ast":null,"code":"import _objectSpread from\"/Volumes/Rben/Repos/Spider_chart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import API from\"../../api\";import{useNavigate,Link}from\"react-router-dom\";import\"./Login.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[form,setForm]=useState({email:\"\",password:\"\"});const navigate=useNavigate();const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleLogin=async e=>{e.preventDefault();try{const res=await API.post(\"/auth/login\",form,{withCredentials:true});console.log(\"Login response:\",res.data);// Debug\nlocalStorage.setItem(\"user\",JSON.stringify(res.data.user));const role=res.data.user.role;if(role===\"employee\")navigate(\"/employee\");else navigate(\"/supervisor\");}catch(err){var _err$response,_err$response2,_err$response2$data;console.error(\"Login error:\",(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data);alert(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Login error\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"div\",{className:\"accent-line\"}),/*#__PURE__*/_jsx(\"p\",{className:\"login-subtitle\",children:\"Sign in to your account\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inpput-group\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",placeholder:\" \",onChange:handleChange,required:true,className:\"form-input\"}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-highlight\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inpput-group\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\" \",onChange:handleChange,required:true,className:\"form-input\"}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-highlight\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"login-button\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Continue\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-icon\",children:\"\\u2192\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-redirect\",children:[\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"signup-link\",children:\"Sign up here\"})]})]})]})});}","map":{"version":3,"names":["React","useState","API","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Login","form","setForm","email","password","navigate","handleChange","e","_objectSpread","target","name","value","handleLogin","preventDefault","res","post","withCredentials","console","log","data","localStorage","setItem","JSON","stringify","user","role","err","_err$response","_err$response2","_err$response2$data","error","response","alert","message","className","children","onSubmit","type","placeholder","onChange","required","to"],"sources":["/Volumes/Rben/Repos/Spider_chart/frontend/src/components/Login/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport API from \"../../api\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport \"./Login.css\";\n\nexport default function Login() {\n  const [form, setForm] = useState({ email: \"\", password: \"\" });\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await API.post(\"/auth/login\", form, {\n        withCredentials: true,\n      });\n      console.log(\"Login response:\", res.data); // Debug\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n      const role = res.data.user.role;\n      if (role === \"employee\") navigate(\"/employee\");\n      else navigate(\"/supervisor\");\n    } catch (err) {\n      console.error(\"Login error:\", err.response?.data);\n      alert(err.response?.data?.message || \"Login error\");\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-card\">\n        <div className=\"login-header\">\n          <h2>Welcome Back</h2>\n          <div className=\"accent-line\"></div>\n          <p className=\"login-subtitle\">Sign in to your account</p>\n        </div>\n        <form onSubmit={handleLogin} className=\"login-form\">\n          <div className=\"inpput-group\">\n            <input\n              name=\"email\"\n              type=\"email\"\n              placeholder=\" \"\n              onChange={handleChange}\n              required\n              className=\"form-input\"\n            />\n            <label className=\"input-label\">Email Address</label>\n            <div className=\"input-highlight\"></div>\n          </div>\n          <div className=\"inpput-group\">\n            <input\n              name=\"password\"\n              type=\"password\"\n              placeholder=\" \"\n              onChange={handleChange}\n              required\n              className=\"form-input\"\n            />\n            <label className=\"input-label\">Password</label>\n            <div className=\"input-highlight\"></div>\n          </div>\n          <button type=\"submit\" className=\"login-button\">\n            <span>Continue</span>\n            <div className=\"button-icon\">â†’</div>\n          </button>\n          <div className=\"signup-redirect\">\n            Don't have an account?{\" \"}\n            <Link to=\"/signup\" className=\"signup-link\">\n              Sign up here\n            </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}